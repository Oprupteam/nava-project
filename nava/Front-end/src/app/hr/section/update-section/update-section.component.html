<app-page-header [items]="['sections'|translate]" [active_item]="'update'|translate"></app-page-header>

<div class="row row-sm">
    <div class="col-lg-12 col-md-12">
        <div class="card custom-card">

            <div class="card-body" *ngIf="section">
                <form [formGroup]="form">
                    <div class="border m-2 p-2">
                        <div class="col-lg row my-4 ">
                            <p class="mg-b-10 tx-semibold col-lg-3">
                            {{ "department" | translate }}<span class="tx-danger">*</span>
                            </p>
                            <select [(ngModel)]="section.department.departmentId" 
                            formControlName="department" [ngClass]="{ 'is-invalid': submitted && f['department'].errors }" 
                            name="department" class="col-lg-5 form-select">
                                <option *ngFor="let department of departments " [value]="department.departmentId">
                                    {{department.departmentName}}
                                </option>
                            </select>
                            <div  *ngIf="submitted && f['department'].errors" class="invalid-feedback col-lg-11">
                                <div class="text-center" *ngIf="f['department'].errors['required']">{{'isRequired'|translate}}</div>
                            </div>
                        </div>

                        <div class="col-lg row my-4">
                            <p class="mg-b-10 tx-semibold col-lg-3">{{'section'|translate}}<span
                                    style="color:red ;"> *</span></p>
                            <input class="form-control col-lg-5" name="section" id="section" type="text"
                                formControlName="section" [ngClass]="{ 'is-invalid': submitted && f['section'].errors }"
                                placeholder="{{'sectionName'|translate}}"  [(ngModel)]='section.sectionName'>
                            <div  *ngIf="submitted && f['section'].errors" class="invalid-feedback col-lg-11">
                                <div class="text-center" *ngIf="f['section'].errors['required']">{{'isRequired'|translate}}</div>
                            </div>
                        </div>

                        <div class="col-lg row my-4 ">
                            <p class="mg-b-10 tx-semibold col-lg-3">
                              {{ "manager" | translate }}<span class="tx-danger">*</span>
                            </p>
                            <select [(ngModel)]="section.employee.employeeId" class="form-select col-lg-5"
                              formControlName="secManager" [ngClass]="{ 'is-invalid': submitted && f['secManager'].errors }" required>
                              <option *ngFor="let secManager of secManagers " value={{secManager.employeeId}}>
                                {{secManager.employeeName}}
                              </option>
                            </select>
                            <div *ngIf="submitted && f['secManager'].errors" class="invalid-feedback col-lg-11">
                              <div class="text-center" *ngIf="f['secManager'].errors['required']">{{'isRequired'|translate}}</div>
                            </div>
                          </div>
                        
                    </div>
                    <hr class="border border-3" style="color:#ccc;height:1px">
                    <div class="">
                        <button class="btn text-white" type="submit" (click)="sectionUpdate()"
                            style="background-color: #5666c0;">{{'save'|translate}}</button>
                        <a routerLink="/section/view" class="btn bg-black-8 text-white mx-2" type="submit"
                            style="background-color: #7886d3;">{{'cancel'|translate}}</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- End Row -->